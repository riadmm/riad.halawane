const Discord = require('discord.js');
const client = new Discord.Client();


client.on('ready', () => {
  console.log('Online')
})

client.on('message', msg => {
  let role = msg.guild.roles.find('name', 'Rainbow');
  if (!role) return;
  if (msg.content === '-r') {
   
  setInterval( function r() {
      role.setColor('RANDOM');
    },1000);
  
  }
})




client.on('message', async rokz => {

    if(rokz.content.startsWith("-ØªÙ‚Ø¯ÙŠÙ…")) {

      let lang = '';

      let time = '';

      let expe = '';

      let fillter = m => m.author.id === rokz.author.id

      await rokz.channel.send("Ù…Ø§ Ù„ØºØªÙƒ ØŸ").then(e => {

     rokz.channel.awaitMessages(fillter, { time: 60000, max: 1 })

     .then(co => {

       lang = co.first().content;

        co.first().delete();


       e.edit(`ÙƒÙ… Ù‡ÙŠ Ø§Ù„Ù…Ø¯Ø© ØŸ
[${lang}]`)

       rokz.channel.awaitMessages(fillter, { time: 60000, max: 1 })

       .then(col => {

         time = col.first().content;

          col.first().delete();


            e.edit(`Ù…Ø§ Ù‡ÙŠ Ø®Ø¨Ø±ØªÙƒ ØŸ
[${time}]
[${lang}]`)

            rokz.channel.awaitMessages(fillter, { time: 60000, max: 1 })

            .then(coll => {

              expe = coll.first().content;

               coll.first().delete();


               e.edit(`Ø¬Ø§Ø±ÙŠ ØªÙ‚Ø¯ÙŠÙ…Ùƒ...
[${expe}]
[${time}]
[${lang}]`)

              let rokzz = rokz.guild.channels.find("name","Ø§Ù„ØªÙ‚Ø¯ÙŠÙ…Ø§Øª")

              setTimeout(() => {

                e.edit("ØªÙ… Ø§Ù„ØªÙ‚Ø¯ÙŠÙ…")

              }, 3000)

              rokzz.send(`
Â» Ø§Ù„Ù„ØºØ© : **${lang}**
Â» Ø§Ù„Ù…Ø¯Ø© : **${time}**
Â» Ø§Ù„Ø®Ø¨Ø±Ø© : **${expe}**
ØªÙ… Ø§Ù„ØªÙ‚Ø¯ÙŠÙ… Ø¨ÙˆØ§Ø³Ø·Ø©: ${rokz.author}
`).then(rokzzz => {

                  rokzzz.react("âœ…")

                  rokzzz.react("âŒ")

                })

            })

       })

     })

   })

    }

  })





        
client.on('message',async message => {

  let mention = message.mentions.members.first();
  
  let Room = client.channels.get('510128984542019614');
  
  if(message.content.startsWith ("Ù‚Ø¨ÙˆÙ„")) {
  
  
   if (!message.member.hasPermission("MANAGE_ROLES")) return message.reply("**Ù„Ù„Ø£Ø³Ù Ù„ÙŠØ³ Ù„Ø¯ÙŠÙƒ ØµÙ„Ø§Ø­ÙŠØ©**").then(msg => msg.delete(5000));
  
  
  if(!mention) return message.reply("Ù…Ù†Ø´Ù† Ø´Ø®Øµ");
  
  
  
  Room.send(`
  **Â» Ø§Ù„Ø¹Ø¶Ùˆ :** ${mention}
  [ :white_check_mark: ] :: Ù„Ù‚Ø¯ ØªÙ… Ù‚Ø¨ÙˆÙ„ Ø§Ù„Ø¹Ø¶Ùˆ ÙˆØ§Ø¹Ø·Ø§Ø¦Ù‡ Ø±ØªØ¨Ø© Ø³Ø¨ÙˆØ±Øª`);
  
  }
  
  });



  

client.on('message',async message => {

  let mention = message.mentions.members.first();
  
  let Room = client.channels.get('510128984542019614');
  
  if(message.content.startsWith("Ø±ÙØ¶")) {
  
  if(message.guild.id !== '507671958792437761') return;
  
   if (!message.member.hasPermission("MANAGE_ROLES")) return message.reply("**Ù„Ù„Ø£Ø³Ù Ù„ÙŠØ³ Ù„Ø¯ÙŠÙƒ ØµÙ„Ø§Ø­ÙŠØ©**").then(msg => msg.delete(5000));
  
  
  if(!mention) return message.reply("Ù…Ù†Ø´Ù† Ø´Ø®Øµ");
  
  
  
  Room.send(`
  **Â» Ø§Ù„Ø¹Ø¶Ùˆ :** ${mention}
  [ :x: ] :: Ù„Ù‚Ø¯ ØªÙ… Ø±ÙØ¶ Ø§Ù„Ø¹Ø¶Ùˆ`);
  
  }
  
  });






client.on('message', message => {
    let args = message.content.split(' ').slice(1);
    if(message.content.split(' ')[0] == '-sug') 
    var embed = new Discord.RichEmbed()

    .setColor('RANDOM')
    .addField('New Suggestion',`${args}`,true)
    .addField('By',`${message.author.tag}`,true)
    .setTimestamp()

    let suggests = message.guild.channels.find(`name`, "Ø§Ù‚ØªØ±Ø§Ø­Ø§Øª");
    suggests.send(embed).then(msg => {
        msg.react('âœ…')
    .then(() => msg.react('âŒ'))
    })
});






   





client.on('message', message => {
          let args = message.content.split(' ').slice(1);
   if(message.content.split(' ')[0] == 'Ù„ÙˆÙ†'){
           const embedd = new Discord.RichEmbed()
     .setFooter('Requested by '+message.author.username, message.author.avatarURL)
   .setDescription(`**Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ù„ÙˆÙ† Ø¨Ù‡Ø°Ø§ Ø§Ù„Ø£Ø³Ù… ** âŒ `)
   .setColor(`ff0000`)
 
    if(!isNaN(args) && args.length > 0)
   
 
if    (!(message.guild.roles.find("name",`${args}`))) return  message.channel.sendEmbed(embedd);
 
 
       var a = message.guild.roles.find("name",`${args}`)
                if(!a)return;
const embed = new Discord.RichEmbed()
                   
     .setFooter('Requested by '+message.author.username, message.author.avatarURL)
   .setDescription(`**Done , ØªÙ… ØªØºÙŠØ± Ù„ÙˆÙ†Ùƒ . âœ… **`)
 
   .setColor(`${a.hexColor}`)
  message.channel.sendEmbed(embed);
          if (!args)return;
setInterval(function(){})
                  let count = 0;
                  let ecount = 0;
        for(let x = 1; x < 201; x++){
           
            message.member.removeRole(message.guild.roles.find("name",`${x}`))
         
            }
                message.member.addRole(message.guild.roles.find("name",`${args}`));
       
           
    }
});

               
               
               











client.on('guildMemberAdd', member => {
    let channel = member.guild.channels.find('name', 'general');
    let memberavatar = member.user.avatarURL
      if (!channel) return; 
    let embed = new Discord.RichEmbed()
        .setColor('RANDOM')
        .setThumbnail(memberavatar)
        .addField(':running_shirt_with_sash: | name :  ',`${member}`)
        .addField(':loudspeaker: | Ù†ÙˆØ±Øª Ø§Ù„Ø³ÙŠØ±ÙØ± ÙŠ Ù‚Ù„Ø¨ÙŠ' , `Welcome to the server, ${member}`)
        .addField(':id: | user :', "**[" + `${member.id}` + "]**" )
                .addField('â¡| Ø§Ù†Øª Ø§Ù„Ø¹Ø¶Ùˆ Ø±Ù‚Ù…',`${member.guild.memberCount}`)
               
                  .addField("Name:",`<@` + `${member.id}` + `>`, true)
                      
                                     .addField(' Ø§Ù„Ù€Ø³ÙŠØ±ÙØ±', `${member.guild.name}`,true)
                                       
     .setFooter("**SERVER NAME **")
        .setTimestamp()
    
      channel.sendEmbed(embed);
    });
   
  
  
  
  
  
  
  
  
  
  
  
const developers = ["394715584421429260"]
const adminprefix = "-";
client.on('message', message => {
    var argresult = message.content.split(` `).slice(1).join(' ');
      if (!developers.includes(message.author.id)) return;
      
  if (message.content.startsWith(adminprefix + 'ply')) {
    client.user.setGame(argresult);
      message.channel.send(`**âœ…   ${argresult}**`)
  } else 
     if (message.content === (adminprefix + "leave")) {
    message.guild.leave();        
  } else  
  if (message.content.startsWith(adminprefix + 'wt')) {
  client.user.setActivity(argresult, {type:'WATCHING'});
      message.channel.send(`**âœ…   ${argresult}**`)
  } else 
  if (message.content.startsWith(adminprefix + 'ls')) {
  client.user.setActivity(argresult , {type:'LISTENING'});
      message.channel.send(`**âœ…   ${argresult}**`)
  } else 
  if (message.content.startsWith(adminprefix + 'st')) {
    client.user.setGame(argresult, "https://www.twitch.tv/idk");
      message.channel.send(`**âœ…**`)
  }
  if (message.content.startsWith(adminprefix + 'setname')) {
  client.user.setUsername(argresult).then
      message.channel.send(`Changing The Name To ..**${argresult}** `)
} else
if (message.content.startsWith(adminprefix + 'setavatar')) {
  client.user.setAvatar(argresult);
    message.channel.send(`Changing The Avatar To :**${argresult}** `);
}
});

  
  
  
  
  
  
  
client.on('message', message => {       
if (message.content.startsWith('-clear')) { //HoNtar
    if(!message.channel.guild) return message.reply('â›” | This Command For Servers Only!'); 
        if(!message.member.hasPermission('MANAGE_MESSAGES')) return message.channel.send('â›” | You dont have **MANAGE_MESSAGES** Permission!');
        if(!message.guild.member(client.user).hasPermission('MANAGE_MESSAGES')) return message.channel.send('â›” | I dont have **MANAGE_MESSAGES** Permission!');
 let args = message.content.split(" ").slice(1)
    let messagecount = parseInt(args);
    if (args > 1000) return message.reply("**ğŸ›‘ || ÙŠØ¬Ø¨ Ø§Ù† ÙŠÙƒÙˆÙ† Ø¹Ø¯Ø¯ Ø§Ù„Ù…Ø³Ø­ Ø£Ù‚Ù„ Ù…Ù† 1000 .**").then(messages => messages.delete(5000))
    if(!messagecount) args = '1000';
    message.channel.fetchMessages({limit: messagecount + 1}).then(messages => message.channel.bulkDelete(messages));
    message.channel.send(`\`${args}\` : __Ø¹Ø¯Ø¯ Ø§Ù„Ø±Ø³Ø§Ø¦Ù„ Ø§Ù„ØªÙŠ ØªÙ… Ù…Ø³Ø­Ù‡Ø§ __ `).then(messages => messages.delete(5000));
  }
});  
 





client.on('message', message => {
    var prefix = "-"
     let command = message.content.split(" ")[0];
   command = command.slice(prefix.length);
 
   let args = message.content.split(" ").slice(1);
 
 
 if(command == "draw") {
     var Canvas = require('canvas')
   , Image = new Canvas.Image
   , canvas = new Canvas(450, 170)
   , ctx = canvas.getContext('2d');
   ctx.font = '30px Impact';
   let args = message.content.split(" ").slice(1);
   
 Image.src = canvas.toBuffer();
 
     console.log(Image);
 ctx.drawImage(Image, 0, 0, Image.width / 470, Image.height / 170);
 ctx.fillText(args.join("  "),110, 70);
 
 
 ctx.beginPath();
 ctx.lineTo(50, 102);
 ctx.stroke();
 
 message.channel.sendFile(canvas.toBuffer());
 }
 
 });








            
client.on('message', message => {
 var prefix = "-"
    if(message.content.startsWith(prefix + 'new')) {
        let args = message.content.split(' ').slice(1).join(' ');
        let support = message.guild.roles.find("name","Support Team");
        let ticketsStation = message.guild.channels.find("name", "TICKETS");
        if(!args) {
            return message.channel.send('Ø§Ù„Ø±Ø¬Ø§Ø¡ ÙƒØªØ§Ø¨Ø© Ø³Ø¨Ø¨ Ø§Ù„ØªØ°ÙƒØ±Ø©');
        };
                if(!support) {
                    return message.channel.send('**Please make sure that `Support Team` role exists and it\'s not duplicated.**');
                };
            if(!ticketsStation) {
                message.guild.createChannel("Ticket", "category");
            };
                message.guild.createChannel(`ğ‘»ğ‘°ğ‘ªğ‘²ğ‘¬ğ‘»`, "text").then(ticket => {
                    message.delete()
                        message.channel.send(`ØªÙ… Ø§Ù†Ø´Ø§Ø¡ ØªØ°ÙƒØ±ØªÙƒ. [ ${ticket} ]`);
                    ticket.setParent(ticketsStation);
                    ticketsStation.setPosition(1);
                        ticket.overwritePermissions(message.guild.id, {
                            SEND_MESSAGES: false,
                            READ_MESSAGES: false
                        });
                            ticket.overwritePermissions(support.id, {
                                SEND_MESSAGES: true,
                                READ_MESSAGES: true
                            });
                                ticket.overwritePermissions(message.author.id, {
                                    SEND_MESSAGES: true,
                                    READ_MESSAGES: true
                                });
                    let embed = new Discord.RichEmbed()
                                .setTitle('**ØªØ°ÙƒØ±Ø© Ø¬Ø¯ÙŠØ¯Ø©.**')
                                .setColor("RANDOM")
                                .setThumbnail(`${message.author.avatarURL}`)
                                .addField('Ø³Ø¨Ø¨ Ø§Ù„ØªØ°ÙƒØ±Ø©', args)
                                .addField('ØµØ§Ø­Ø¨ Ø§Ù„ØªØ°ÙƒØ±Ø©', message.author)
                                .addField('Ø§Ù„Ø±ÙˆÙ…', `<#${message.channel.id}>`);
 
                                ticket.sendEmbed(embed);
                }) .catch();
    }
    if(message.content.startsWith(prefix + 'close')) {
            if(!message.member.hasPermission("ADMINISTRATOR")) return;
        if(!message.channel.name.startsWith("ğ‘»ğ‘°ğ‘ªğ‘²ğ‘¬ğ‘»")) {
            return;
        };  
                let embed = new Discord.RichEmbed()
                    .setAuthor("Ù‡Ù„ ØªØ±ÙŠØ¯ ÙØ¹Ù„Ø¢ Ø§ØºÙ„Ø§Ù‚ Ø§Ù„ØªØ°ÙƒØ±Ø© ØŸ.")
                    .setColor("RANDOM");
                    message.channel.sendEmbed(embed) .then(codes => {
 
                   
                        const filter = msg => msg.content.startsWith(prefix + 'close');
                        message.channel.awaitMessages(response => response.content === prefix + 'close', {
                            max: 1,
                            time: 20000,
                            errors: ['time']
                        })
                        .then((collect) => {
                            message.channel.delete();
                        }) .catch(() => {
                            codes.delete()
                                .then(message.channel.send('**Operation has been cancelled.**')) .then((c) => {
                                    c.delete(4000);
                                })
                                   
                           
                        })
 
 
                    })
 
 
           
    }
});








client.login(process.env.BOT_TOKEN);
